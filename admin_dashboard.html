topResults.forEach(card => {
      const cardImage = card.image_uris?.normal || card.card_faces?.[0]?.image_uris?.normal;
      if (!cardImage) return;

      const cardName = card.name;
      const cardSet = card.set.toUpperCase();
      const typeLine = card.type_line || "Unknown";

      let variantLabel = '';
      if (card.frame_effects?.includes('showcase')) {
        variantLabel = '(Showcase)';
      } else if (card.frame_effects?.includes('extendedart')) {
        variantLabel = '(Extended Art)';
      } else if (card.frame_effects?.includes('borderless')) {
        variantLabel = '(Borderless)';
      } else if (card.full_art) {
        variantLabel = '(Full Art)';
      }

      const cardDiv = document.createElement('div');
      cardDiv.className = 'card-item';

      cardDiv.innerHTML = `
        <div class="card-info">
          <img src="${cardImage}" alt="${cardName}">
          <div>
            <strong>${cardName} ${variantLabel}</strong>
            <span>Set: ${cardSet}</span><br>
            <span>${typeLine}</span>
          </div>
        </div>
      `;

      cardDiv.addEventListener('mousedown', e => e.preventDefault());

      cardDiv.addEventListener('click', e => {
        e.preventDefault();
        document.getElementById('cardName').value = `${cardName} ${variantLabel}`.trim();
        document.getElementById('set').value = card.set_name;
        document.getElementById('search-input').value = '';
        document.getElementById('quantity').value = 1;
        resultsDiv.innerHTML = '';
        document.getElementById('cardName').scrollIntoView({ behavior: 'smooth' });
      });

      resultsDiv.appendChild(cardDiv);
    });
  } catch (err) {
    console.error('Error searching Scryfall:', err);
    resultsDiv.innerHTML = `<p>No results found for "<strong>${query}</strong>".</p>`;
  }
}
  </script>
</body>
</html>
